**定义**

完全托管，多区域，多活动的持久数据库。提供个位数的毫秒级性能。

**数据库扩展方式**

传统数据库：scale up（纵向扩展：扩展容量）

NoSQL：scale out（横向扩展：扩展容量、算力等）

# 结构

- **表**— 类似于其他数据库系统，DynamoDB 将数据存储在表中。*表* 是数据的集合。例如，请参阅名为 *People* 的示例表，该表可用于存储有关好友、家人或关注的任何其他人的个人联系信息。您也可以建立一个 *Cars* 表，存储有关人们所驾驶的车辆的信息。
- **项目**— 每个表包含零个或更多个项目。*项目* 是一组属性，具有不同于所有其他项目的唯一标识。在 *People* 表中，每个项目表示一位人员。在 *Cars* 表中，每个项目代表一种车。DynamoDB 中的项目在很多方面都类似于其他数据库系统中的行、记录或元组。在 DynamoDB 中，对表中可存储的项目数没有限制。
- **属性**— 每个项目由一个或多个属性组成。*属性* 是基础的数据元素，无需进一步分解。例如，*People* 表中的一个项目包含名为 *PersonID*、*LastName*、*FirstName* 等的属性。对于 *Department* 表，项目可能包含 *DepartmentID*、*Name*、*Manager* 等属性。DynamoDB 中的属性在很多方面都类似于其他数据库系统中的字段或列。

# 主键类型

分区键（指定了物理存储位置）

分区键+排序键（指定了物理存储位置 + 存储顺序）

ps：每个主键属性必须为标量 (表示它只能具有一个值)。主键属性唯一允许的数据类型是字符串、数字和二进制。对于其他非键属性没有任何此类限制。

# 索引支持

- 全局二级索引 — 一种带有可能与表中不同的分区键和排序键的索引。
- 本地二级索引 — 一种分区键与表中的不同的索引。

# DynamoDB Streams

实时捕获数据修改事件

**触发条件**

- 将向表中添加一个新项目：流将捕获整个项目的映像，包括其所有属性。
- 项目已更新：流将捕获项目中已修改的任何属性的 “之前” 和 “之后” 映像。
- 将从表中删除一个项目：流将在整个项目被删除前捕获其映像。


# 一致性模型

最终一致性/强一致性

**最终一致性读取**

当您从 DynamoDB 表中读取数据时，响应反映的可能不是刚刚完成的写入操作的结果。响应可能包含某些陈旧数据。如果您在短时间后重复读取请求，响应将返回最新的数据。

**强一致性读取**

当您请求强一致性读取时，DynamoDB 将返回具有最新数据的响应，从而反映来自所有已成功的先前写入操作的更新。但是，这种一致性有一些缺点：

- 如果网络延迟或中断，可能会无法执行强一致性读取。在这种情况下，DynamoDB 可能会返回服务器错误 (HTTP 500)。
- 强一致性读取可能比最终一致性读取具有更高的延迟。
- 全局二级索引不支持强一致性读取。
- 强一致性读取可能比最终一致性读取使用更高的吞吐量。

# API
## 控制层面

*控制层面*操作可让您可以创建和管理 DynamoDB 表。它们还可让您使用依赖于表的索引、流和其他对象。

- `CreateTable`— 创建新表。或者，您也可以创建一个或多个二级索引并为表启用 DynamoDB Streams。
- `DescribeTable`— 返回有关表的信息，例如，表的主键架构、吞吐量设置和索引信息。
- `ListTables`— 返回列表中您的所有表的名称。
- `UpdateTable`— 修改表或其索引的设置、创建或删除表上的新索引或修改表的 DynamoDB Streams 设置。
- `DeleteTable`— 从 DynamoDB 中删除表及其所有依赖对象。

## 数据层面

*数据层面* 操作可让您对表中的数据执行创建、读取、更新和删除（也称为 *CRUD*）操作。某些数据层面操作还可让您可以从二级索引读取数据。

### 一种与 PartiQL 兼容的查询语言

- `ExecuteStatement`— 从表中读取多个项目。您还可以从表中编写或更新单个项目。写入或更新单个项目时，您必须指定主键属性。
- `BatchExecuteStatement`— 写入、更新或读取表中的多个项目。这比`ExecuteStatement`因为您的应用程序只需一个网络往返行程即可写入或读取项目。

### Classic API

#### 创建数据

- `PutItem`— 将单个项目写入表中。您必须指定主键属性，但不必指定其他属性。
- `BatchWriteItem`— 将最多 25 个项目写入到表。这比多次调用 `PutItem` 更有效，因为您的应用程序只需一个网络往返行程即可写入项目。您还可以使用 `BatchWriteItem` 来从一个或多个表中删除多个项目。

#### 读取数据

- `GetItem`— 从表中检索单个项目。您必须为所需的项目指定主键。您可以检索整个项目，也可以仅检索其属性的子集。
- `BatchGetItem`— 从一个或多个表中检索最多 100 个项目。这比多次调用 `GetItem` 更有效，因为您的应用程序只需一个网络往返行程即可读取项目。
- `Query`— 检索具有特定分区键的所有项目。您必须指定分区键值。您可以检索整个项目，也可以仅检索其属性的子集。或者，您也可以对排序键值应用条件，以便只检索具有相同分区键的数据子集。您可以对表使用此操作，前提是该表同时具有分区键和排序键。您还可以对索引使用此操作，前提是该索引同时具有分区键和排序键。
- `Scan`— 检索指定表或索引中的所有项目。您可以检索整个项目，也可以仅检索其属性的子集。或者，您也可以应用筛选条件以仅返回您感兴趣的值并放弃剩余的值。

#### 更新数据

- `UpdateItem`— 修改项目中的一个或多个属性。您必须为要修改的项目指定主键。您可以添加新属性并修改或删除现有属性。您还可以执行有条件更新，以便更新仅在满足用户定义的条件时成功。或者，您也可以实施一个原子计数器，该计数器可在不干预其他写入请求的情况下递增或递减数字属性。

#### 删除数据

- `DeleteItem`— 从表中删除单个项目。您必须为要删除的项目指定主键。
- `BatchWriteItem`— 从一个或多个表中删除最多个项目。这比多次调用 `DeleteItem` 更有效，因为您的应用程序只需一个网络往返行程即可删除项目。您也可以使用 `BatchWriteItem` 来向一个或多个表添加多个项目。

## DynamoDB Streams

*DynamoDB Streams*操作可让您对表启用或禁用流，并能允许对包含在流中的数据修改记录的访问。

- `ListStreams`— 返回您的所有流的列表，或仅返回特定表的流。
- `DescribeStream`— 返回有关流的信息，例如，流的 Amazon 资源名称 (ARN) 和您的应用程序可开始读取前几条流记录的位置。
- `GetShardIterator`— 返回*分片迭代器*，这是您的应用程序用来从流中检索记录的数据结构。
- `GetRecords`— 使用给定分片迭代器检索一条或多条流记录。

### 一种与 PartiQL 兼容的查询语言

- `ExecuteTransaction`— 一种批处理操作，它允许在表内和跨表对多个项目执行 CRUD 操作，并保证得到全有或全无结果。

### Classic API

- `TransactWriteItems`— 允许`Put`、`Update`, 和`Delete`操作添加到表内和跨表的多个项目，并保证得到全有或全无结果。
- `TransactGetItems`— 允许`Get`操作以检索一个或多个表中的多个项目。

# 数据类型

DynamoDB 对表中的属性支持很多不同的数据类型。可按以下方式为属性分类：

- **标量类型**— 标量类型可准确地表示一个值。标量类型包括数字、字符串、二进制、布尔值和 null。
- **文档类型**— 文档类型可表示具有嵌套属性的复杂结构，例如您将在 JSON 文档中找到的结构。文档类型包括列表和映射。
- **Set 类型**— 集类型可表示多个标量值。集类型包括字符串集、数字集和二进制集。

## 标量

Number，String，Binary，Boolean，Null

## 文档
List，Map

