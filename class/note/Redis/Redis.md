# Redis

## 相关常识

秒 > 毫秒 > 微秒 > 纳秒

**磁盘**
> 寻址速度：ms
> 带宽：G/M  每秒 

**内存**
> 寻址速度： ns
> 带宽：几G到几十G 每秒

**I/O Buffer**
成本问题：磁盘与磁道，扇区：512Byte
扇区小了之后导致索引成本变大
操作一般读取的时候以4K做一次读取

**mysql**
mysql将数据分页存储，一页大小为16K，读取时先将B+树的树干（非叶子节点加载到内存）进行查询，找到对应范围之后再去磁盘上进行读取

如果表特别大，性能会下降？
如果有索引，增删改变慢（因为增删改都会去修改索引），查询少量数据还是很快，并发大的时候受硬盘带宽影响速度（因为会将读出的数据加载到内存，如果落在不同的4K上，就会读取不同的区域到内存，读取的时候要看磁盘带宽，依次读取）

**SAP HANA（2T）**
内存级别的关系型数据库，太贵，用不起

ps:数据在磁盘和内存体积不一样

## 为什么要使用Redis?

因为hana用不起，磁盘型的关系型数据库的速度较慢，所以采用了折中的方法，用了非关系型数据库Redis和memcached

由于冯诺依曼体系的硬件和以太网的出现，TCP/IP的网络。导致可能出现数据不一致的情况，所以才会产生带宽问题

## Redis是什么

redis可以用作数据库，缓存，消息代理

它提供了一些数据结构，比如string，lists，sets，hashes，sorted sets，bitmap，hyperloglogs，geospatial indexes,streams

Redis具有内置的复制、Lua脚本、LRU缓存、事务和不同级别的磁盘持久性，并通过Redis 哨兵和Redis 集群的自动分区提供高可用性。

## Redis与memcached

|          | Redis                                 | memcached                  |
| -------- | ------------------------------------- | -------------------------- |
| 数据类型 | 提供list，set，hash，bitmap等数据类型 | 简单数据类型，string和整数 |
| 灾难恢复 | 可以通过aof恢复                       | 无法恢复                   |
| 数据备份 | 支持                                  | 不支持                     |
| 执行速度 | 慢                                    | 快                         |
| 线程     | 单线程                                | 多线程                     |




# 数据库引擎

https://db-engines.com/en/

技术选型